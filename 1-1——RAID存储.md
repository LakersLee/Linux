Aduit：Lee Sir
Date：2018/12/24

***=====RAID存储====***

一、RAID-0（等量模式stripe）：性能最佳（最少1块硬盘）

	· 将磁盘切分成等量的区块，当文件写入时，文件会依据区块的大小切割好，然后按次序分别存入各个的磁盘中；

	· 越多块磁盘组成的RAID-0性能会越好，因为每块磁盘负责的数据量更低了，表示数据可以分散让多块磁盘存储，性能也会更好；

	· 只要有任何一块磁盘损毁，在RAID上面的所有数据都会丢失而无法读取

	· 如果不同大小的磁盘组成RAID-0时，存数据仍然是按照等量存储，这样一来，小容量的磁盘会先将存储先消耗完毕，那么剩一块大容量的磁盘就要独立进行数据存储，那么性能就会变差了。

二、RAID-1（映像模式，mirror）：完整备份（最少2块硬盘）

	· 这种模式下需要相同容量的磁盘，最好是一摸一样的，因为两块盘组成RAID-1时，总容量将以最小的那块磁盘为主，相当于另一块磁盘的空间浪费了；

	· 写入数据时，同一条数据同步分别写入两块磁盘上面，整体的RAID容量相当于少了50%；

	· 由于两块硬盘的数据一摸一样，好像镜子照出来的一样，所以叫mirror（映像）；

	· 由于一条数据需要进行两次存储，所以系统I／O总线会有影响，
		· 当大量数据发生时，写入（南桥：写入）速度会变慢，但是由于数据存储两份，
			· 如果使用的为硬件RAID（磁盘阵列卡），磁盘阵列卡会主动复制一份而不是用系统的I／O总线，性能方面还可以；
			· 如果使用的时软件磁盘阵列，可能性能就不好了；

	· 当损毁任何一个硬盘时，数据不受影响，所以他的数据备份或许是他的优点了

三、RAID 0+1， RAID 1+0（最少4块盘）

***RAID-0的性能佳但数据不安全。 RAID-1的数据安全但性能不佳***
***所以二者结合起来，先组RAID-0就是 0+1。  先组RAID-1 就是 1+0***

	· 两块盘分别组成RAID-0，然后两组盘再组成RAId-1；

	· 既保障了数据的I／O速度，又可以保证数据的安全；

	· 总容量会少一半用来做存储；

四、RAID 5 （性能与数据备份的均衡考虑）（至少3块盘）
	
***默认仅能支持一块磁盘的损毁情况***
***同位检查码（parity）：通过cpu计算而非专门的磁盘阵列卡，性能需评估***

	· 数据写入类似于RAID-0，不过每个循环的过程，每块磁盘要加入一个同为检查数据（Parity），这个数据会记录其他磁盘的备份数据，用于当有磁盘损毁时的救援；

	· 每个磁盘写入数据时，都会有部分的同位检查码（parity）被记录起来，注意是每块盘记录都记录其他磁盘的同位检查码；
	
	· 由于存在同位检查码，因此RAID5 的总容量会是整体磁盘数量减一块（3-1=2块），
		· 当损坏的磁盘数量>=2块时，整组RAID5 的数据就损毁了；
		· 读写性能类似于RAID-1，但是需要写入数据计算同位检查码（parity）的关系，所以要比RAID-1稍差一些；

	· 未来发展：RAID6 支持2块磁盘的损毁

五、Spare Disk：预备磁盘功能（一块或多块没有包含在磁盘阵列中的磁盘）
	
	· 磁盘阵列<优点>：当磁盘出现损坏时，需要将坏的磁盘拔出，更换一块新的磁盘。磁盘启动完毕后，磁盘阵列会开始主动重建（rebuild）原本坏掉的那块磁盘数据到训的磁盘，实现数据还原

	· 为了让系统实现坏掉硬盘的自动重建，需要预备磁盘（Spare Disk），预备磁盘平时不会被磁盘阵列使用，当阵列中有任何一块磁盘损坏时，预备磁盘会被主动拉进磁盘阵列，并将坏掉的磁盘移除出阵列，然后立即重建数据系统。如此保障系统运行。




